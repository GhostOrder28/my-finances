"use strict";(self["webpackChunkmy_finances"]=self["webpackChunkmy_finances"]||[]).push([[140],{145:function(t,e,a){function n(t){const{tableRef:e,tbodyRef:a}=t;console.log("tbody ref",a),console.log("window inner height",window.innerHeight),console.log("table offset top",e.offsetTop),console.log("table body offset top",a.offsetTop);const n=window.innerHeight-e.offsetTop-a.offsetTop-41;return n}a.d(e,{b:function(){return n}})},5169:function(t,e,a){a.d(e,{Z:function(){return u}});var n=a(3396),l=a(7139);function s(t,e,a,s,o,i){const c=(0,n.up)("Icon"),r=(0,n.up)("router-link");return(0,n.wg)(),(0,n.j4)(r,{class:"f-rs",to:t.url},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.label),1),(0,n.Wm)(c,{name:"plus"})])),_:1},8,["to"])}var o=a(6089),i=(0,n.aZ)({props:{label:{type:Object,required:!0},url:{type:Object,required:!0}},components:{Icon:o.Z}}),c=a(89);const r=(0,c.Z)(i,[["render",s],["__scopeId","data-v-09c925ad"]]);var u=r},4319:function(t,e,a){a.d(e,{Z:function(){return p}});var n=a(3396),l=a(7139);const s={class:"container"},o={class:"label-container"};function i(t,e,a,i,c,r){const u=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",o,[(0,n.Wm)(u,{name:a.icon},null,8,["name"]),(0,n._)("h2",null,(0,l.zw)(a.label),1)]),(0,n._)("span",null,"S/ "+(0,l.zw)(a.value),1)])}var c=a(6089),r={props:{icon:{required:!0,type:String},label:{required:!0,type:String},value:{required:!0,type:String}},components:{Icon:c.Z}},u=a(89);const d=(0,u.Z)(r,[["render",i],["__scopeId","data-v-917321dc"]]);var p=d},4140:function(t,e,a){a.r(e),a.d(e,{default:function(){return R}});var n=a(3396),l=a(7139);const s=t=>((0,n.dD)("data-v-aef489ae"),t=t(),(0,n.Cn)(),t),o={id:"top-panel"},i={id:"sale-info"},c={id:"stats-container"},r={id:"tabs-container"},u={id:"page-content"},d={ref:"tableRef"},p={key:0},f=s((()=>(0,n._)("tr",null,[(0,n._)("th",{class:"f-rs"},"Producto"),(0,n._)("th",{class:"f-rs"},"Cantidad"),(0,n._)("th",{class:"f-rs"},"Precio/unidad")],-1))),w=[f],g={key:1},m=s((()=>(0,n._)("tr",null,[(0,n._)("th",{class:"f-rs"},"Fecha de pago"),(0,n._)("th",{class:"f-rs"},"Cantidad")],-1))),D=[m],h={key:0},_={class:"f-rs"},y={class:"f-rs"},b={class:"f-rs"},v={key:1},k={class:"f-rs"},V={class:"f-rs"},z={key:2},S={class:"f-rs"},Z={class:"f-rs"};function q(t,e,a,s,f,m){const q=(0,n.up)("StatItem"),I=(0,n.up)("PopupButton");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("section",o,[(0,n._)("div",i,[(0,n._)("h1",null,"Venta realizada a "+(0,l.zw)(t.clientData?t.clientData.clientName:""),1),(0,n._)("time",null,(0,l.zw)(t.clientData?t.clientData.sales.saleDate:""),1)]),(0,n._)("div",c,[(0,n.Wm)(q,{icon:"total-value",label:"Valor total",value:t.clientData?t.clientData.sales.saleValue:NaN},null,8,["value"]),(0,n.Wm)(q,{icon:"amount-paid",label:"Monto pagado",value:t.clientData?t.clientData.sales.paidAmount:NaN},null,8,["value"]),(0,n.Wm)(q,{icon:"debt",label:"Deuda",value:t.clientData?t.clientData.sales.unpaidAmount:NaN},null,8,["value"])])]),(0,n._)("section",r,[(0,n._)("button",{name:"products",class:"tab f-rs",onClick:e[0]||(e[0]=(...e)=>t.changeView&&t.changeView(...e))},"PRODUCTOS"),(0,n._)("button",{name:"payments",class:"tab f-rs",onClick:e[1]||(e[1]=(...e)=>t.changeView&&t.changeView(...e))},"PAGOS")]),(0,n._)("section",u,[(0,n._)("table",d,["products"===t.currentView?((0,n.wg)(),(0,n.iD)("thead",p,w)):(0,n.kq)("",!0),"payments"===t.currentView?((0,n.wg)(),(0,n.iD)("thead",g,D)):(0,n.kq)("",!0),(0,n._)("tbody",{ref:"tbodyRef",style:(0,l.j5)({height:t.tbodyHeight+"px"})},["products"===t.currentView&&t.clientData?((0,n.wg)(),(0,n.iD)("div",h,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.clientData.sales.items,((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{key:"item"+e},[(0,n._)("td",_,(0,l.zw)(t.name),1),(0,n._)("td",y,(0,l.zw)(t.quantity),1),(0,n._)("td",b,"S/ "+(0,l.zw)(t.pricePerUnit),1)])))),128))])):(0,n.kq)("",!0),"payments"===t.currentView&&t.clientData?((0,n.wg)(),(0,n.iD)("div",v,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.clientData.sales.payments,((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{key:"item"+e},[(0,n._)("td",k,(0,l.zw)(t.paymentDate),1),(0,n._)("td",V,"S/ "+(0,l.zw)(t.amount),1)])))),128))])):(0,n.kq)("",!0),"payments"===t.currentView?((0,n.wg)(),(0,n.iD)("div",z,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.payments,((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{key:"item"+e},[(0,n._)("td",S,(0,l.zw)(t.date),1),(0,n._)("td",Z,"S/ "+(0,l.zw)(t.amountPaid),1)])))),128))])):(0,n.kq)("",!0)],4)],512)]),(0,n.Wm)(I,{label:"AÃ±adir pago",url:`${t.$route.path}newpayment`},null,8,["url"])],64)}var I=a(5169),H=a(4319),C=a(145),P=a(5072),N=a(8898),W=(0,n.aZ)({data(){return{clientData:void 0,currentView:"products",tbodyHeight:0}},components:{StatItem:H.Z,PopupButton:I.Z},methods:{changeView(t){this.currentView=t.target.name},async getSaleData(){try{const{clientid:t,saleid:e}=this.$route.params,a=await N.Z.get(`/clients/${t}/sales/${e}`);console.log("sale data: ",a.data.saleData),this.clientData=a.data.saleData}catch(t){(0,P.IZ)(t)&&console.error(t.response)}}},watch:{clientData(t){console.log("new value",t)}},async beforeMount(){await this.getSaleData()},mounted(){const t=(0,C.b)(this.$refs);this.tbodyHeight=t}}),$=a(89);const O=(0,$.Z)(W,[["render",q],["__scopeId","data-v-aef489ae"]]);var R=O}}]);
//# sourceMappingURL=140.b9efd2b2.js.map