{"version":3,"file":"js/348.b17948e6.js","mappings":"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","sources":["webpack://my-finances/./src/pages/client-form-page.vue?c3f0","webpack://my-finances/./src/pages/client-form-page.vue?e876","webpack://my-finances/./src/pages/client-form-page.vue"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-68451e26\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { id: \"header\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"Nuevo cliente\", -1))\nconst _hoisted_3 = { class: \"input-container\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"clientName\",\n  class: \"f-rs\"\n}, \"Nombre *\", -1))\nconst _hoisted_5 = {\n  for: \"clientName\",\n  class: \"f-rs\"\n}\nconst _hoisted_6 = { class: \"input-container\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"clientNameDetails\",\n  class: \"f-rs\"\n}, \"Detalle del nombre\", -1))\nconst _hoisted_8 = {\n  for: \"clientNameDetails\",\n  class: \"f-rs\"\n}\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"tooltip\" }, \"Esto es opcional, pero es útil para diferenciar entre dos personas con el mismo nombre.\", -1))\nconst _hoisted_10 = { class: \"input-container\" }\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"contactPhone\",\n  class: \"f-rs\"\n}, \"Número de contacto\", -1))\nconst _hoisted_12 = {\n  for: \"contactPhone\",\n  class: \"f-rs\"\n}\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { id: \"actions\" }, [\n  /*#__PURE__*/_createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"f-rs action-button confirm\"\n  }, \"Añadir cliente\"),\n  /*#__PURE__*/_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"f-rs action-button danger\"\n  }, \"Cancelar\")\n], -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Icon = _resolveComponent(\"Icon\")!\n\n  return (_openBlock(), _createElementBlock(\"section\", {\n    id: \"page-content\",\n    style: _normalizeStyle({ height: _ctx.sectionHeight + 'px' }),\n    ref: \"sectionRef\"\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_Icon, { name: \"new-client\" }),\n      _hoisted_2\n    ]),\n    _createElementVNode(\"span\", null, _toDisplayString(_ctx.formErrors.notFoundError), 1),\n    _createElementVNode(\"form\", {\n      onSubmit: _cache[3] || (_cache[3] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.handleSubmit && _ctx.handleSubmit(...args)), [\"prevent\"]))\n    }, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _withDirectives(_createElementVNode(\"input\", {\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.formState.clientName) = $event)),\n          name: \"clientName\",\n          type: \"text\",\n          placeholder: \"Nombre del cliente\"\n        }, null, 512), [\n          [_vModelText, _ctx.formState.clientName]\n        ]),\n        _createElementVNode(\"label\", _hoisted_5, _toDisplayString(_ctx.formErrors.clientName), 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_6, [\n        _hoisted_7,\n        _withDirectives(_createElementVNode(\"input\", {\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.formState.clientNameDetails) = $event)),\n          name: \"clientNameDetails\",\n          type: \"text\",\n          placeholder: \"amigo, vecino, etc\"\n        }, null, 512), [\n          [_vModelText, _ctx.formState.clientNameDetails]\n        ]),\n        _createElementVNode(\"label\", _hoisted_8, _toDisplayString(_ctx.formErrors.clientNameDetails), 1),\n        _hoisted_9\n      ]),\n      _createElementVNode(\"div\", _hoisted_10, [\n        _hoisted_11,\n        _withDirectives(_createElementVNode(\"input\", {\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.formState.contactPhone) = $event)),\n          name: \"contactPhone\",\n          type: \"text\",\n          placeholder: \"Número para contactar al cliente\"\n        }, null, 512), [\n          [_vModelText, _ctx.formState.contactPhone]\n        ]),\n        _createElementVNode(\"label\", _hoisted_12, _toDisplayString(_ctx.formErrors.contactPhone), 1)\n      ]),\n      _hoisted_13\n    ], 32)\n  ], 4))\n}","\nimport { State, Methods, Refs } from '@/types/pages/client-form-page.types'\nimport Icon from '@/components/icon.vue'\nimport http from '@/utils/axios-instance'\nimport { Empty } from '@/types/global.types'\nimport { defineComponent } from 'vue'\nimport { isAxiosError } from 'axios'\n\nexport default defineComponent<Empty, Empty, State, Empty, Methods>({\n  data () {\n    return {\n      sectionHeight: 0,\n      formState: {\n        clientName: '',\n        clientNameDetails: '',\n        contactPhone: '',\n      },\n      formErrors: {}\n    }\n  },\n  components: {\n    Icon\n  },\n  async beforeMount () {\n    if (this.$route.params.clientid) {\n      await this.getClientData()\n    }\n  },\n  mounted () {\n    const { sectionRef } = this.$refs as Refs;\n    this.sectionHeight = window.innerHeight - sectionRef.offsetTop; \n    // this last part is just for testing purposes in my desktop environment, for some reason on firefox when tbody display is set to block then offsettop alwaqys returns 0\n  },\n  methods: {\n    async handleSubmit () {\n      try {\n        const { clientName, clientNameDetails, contactPhone } = this.formState;\n        console.log(JSON.stringify(this.formState, null, 2))\n        let endpoint;\n\n        if (this.$route.params.clientid) {\n          endpoint = `/clients/${this.$route.params.clientid}`\n          await http.patch(endpoint, {\n            clientName,\n            clientNameDetails,\n            contactPhone,\n          })\n        } else {\n          endpoint = `/clients/${this.$store.state._id}`\n          await http.post(endpoint, {\n            clientName,\n            clientNameDetails,\n            contactPhone,\n          })\n        }\n        // this repetition could be solved by implementing a new enpoint that retrieves the client form data only\n      } catch (err) {\n        if (isAxiosError(err)) {\n          this.formErrors = err.response?.data.validationError\n        }\n      }\n    },\n    async getClientData () {\n      try {\n        const res = await http.get(`/clients/${this.$route.params.clientid}?single=true`)\n        const { sales, ...clientData } = res.data.clientData\n        this.formState = clientData\n      } catch (err) {\n        if (isAxiosError(err)) {\n          this.formErrors = err.response?.data\n        }\n      }\n    }\n  }\n})\n","import { render } from \"./client-form-page.vue?vue&type=template&id=68451e26&scoped=true&ts=true\"\nimport script from \"./client-form-page.vue?vue&type=script&lang=ts\"\nexport * from \"./client-form-page.vue?vue&type=script&lang=ts\"\n\nimport \"./client-form-page.vue?vue&type=style&index=0&id=68451e26&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/ghost-order/proyectos_personales/dev/my-finances/client/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-68451e26\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","id","_hoisted_2","_createElementVNode","_hoisted_3","class","_hoisted_4","for","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","type","render","_ctx","_cache","$props","$setup","$data","$options","_component_Icon","_resolveComponent","_openBlock","_createElementBlock","style","_normalizeStyle","height","sectionHeight","ref","_createVNode","name","_toDisplayString","formErrors","notFoundError","onSubmit","_withModifiers","args","handleSubmit","_withDirectives","$event","formState","clientName","placeholder","_vModelText","clientNameDetails","contactPhone","defineComponent","data","components","Icon","async","this","$route","params","clientid","getClientData","mounted","sectionRef","$refs","window","innerHeight","offsetTop","methods","endpoint","console","log","JSON","stringify","http","$store","state","_id","err","isAxiosError","response","validationError","res","sales","clientData","__exports__"],"sourceRoot":""}