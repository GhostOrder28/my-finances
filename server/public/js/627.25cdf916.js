"use strict";(self["webpackChunkmy_finances"]=self["webpackChunkmy_finances"]||[]).push([[627],{145:function(t,e,n){function a(t){const{tableRef:e,tbodyRef:n}=t;console.log("tbody ref",n),console.log("window inner height",window.innerHeight),console.log("table offset top",e.offsetTop),console.log("table body offset top",n.offsetTop);const a=window.innerHeight-e.offsetTop-n.offsetTop-41;return a}n.d(e,{b:function(){return a}})},5169:function(t,e,n){n.d(e,{Z:function(){return u}});var a=n(3396),l=n(7139);function o(t,e,n,o,s,i){const c=(0,a.up)("Icon"),r=(0,a.up)("router-link");return(0,a.wg)(),(0,a.j4)(r,{class:"f-rs",to:t.url},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(t.label),1),(0,a.Wm)(c,{name:"plus"})])),_:1},8,["to"])}var s=n(6089),i=(0,a.aZ)({props:{label:{type:Object,required:!0},url:{type:Object,required:!0}},components:{Icon:s.Z}}),c=n(89);const r=(0,c.Z)(i,[["render",o],["__scopeId","data-v-09c925ad"]]);var u=r},4319:function(t,e,n){n.d(e,{Z:function(){return f}});var a=n(3396),l=n(7139);const o={class:"container"},s={class:"label-container"};function i(t,e,n,i,c,r){const u=(0,a.up)("Icon");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",s,[(0,a.Wm)(u,{name:n.icon},null,8,["name"]),(0,a._)("h2",null,(0,l.zw)(n.label),1)]),(0,a._)("span",null,"S/ "+(0,l.zw)(n.value),1)])}var c=n(6089),r={props:{icon:{required:!0,type:String},label:{required:!0,type:String},value:{required:!0,type:String}},components:{Icon:c.Z}},u=n(89);const d=(0,u.Z)(r,[["render",i],["__scopeId","data-v-917321dc"]]);var f=d},3627:function(t,e,n){n.r(e),n.d(e,{default:function(){return H}});var a=n(3396),l=n(7139);const o=t=>((0,a.dD)("data-v-69996939"),t=t(),(0,a.Cn)(),t),s={id:"top-panel"},i={id:"stats-container"},c={id:"client-info"},r={id:"page-content"},u={ref:"tableRef"},d=o((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{class:"f-rs"},"Venta"),(0,a._)("th",{class:"f-rs"},"Total"),(0,a._)("th",{class:"f-rs"},"Pagado"),(0,a._)("th",{class:"f-rs"},"Deuda")])],-1))),f={key:0},p={class:"f-rs"},_={class:"ls"},w={class:"f-rs"},m={class:"f-rs"},b={class:"f-rs"};function g(t,e,n,o,g,h){const D=(0,a.up)("Icon"),v=(0,a.up)("StatItem"),y=(0,a.up)("router-link"),Z=(0,a.up)("PopupButton");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("section",s,[(0,a._)("div",i,[(0,a._)("div",c,[(0,a._)("h1",null,(0,l.zw)(t.clientData?t.clientData.clientName:""),1),(0,a._)("address",null,[(0,a.Wm)(D,{name:"phone"}),(0,a._)("span",null,(0,l.zw)(t.clientData?t.clientData.contactPhone:""),1)])]),(0,a.Wm)(v,{icon:"total-debt",label:"Deuda total",value:t.clientData?t.clientData.currentDebt:0},null,8,["value"])])]),(0,a._)("section",r,[(0,a._)("table",u,[d,(0,a._)("tbody",{ref:"tbodyRef",style:(0,l.j5)({height:t.tbodyHeight+"px"})},[t.clientData?((0,a.wg)(),(0,a.iD)("div",f,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.clientData.sales,((e,n)=>((0,a.wg)(),(0,a.iD)("tr",{key:"sale"+n},[(0,a.Wm)(y,{to:`${t.$route.path}/sale/${e._id}`},{default:(0,a.w5)((()=>[(0,a._)("td",p,[(0,a._)("time",_,(0,l.zw)(e.saleDate),1),(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.items,((t,e)=>((0,a.wg)(),(0,a.iD)("li",{key:"item"+e},(0,l.zw)(t.name),1)))),128))])]),(0,a._)("td",w,(0,l.zw)(e.saleValue),1),(0,a._)("td",m,(0,l.zw)(e.paidAmount),1),(0,a._)("td",b,(0,l.zw)(e.unpaidAmount),1)])),_:2},1032,["to"])])))),128))])):(0,a.kq)("",!0)],4)],512)]),(0,a.Wm)(Z,{label:"Nueva venta",url:{name:"newsale",params:{clientid:t.$route.params.clientid}}},null,8,["url"])],64)}var h=n(4319),D=n(5169),v=n(6089),y=n(145),Z=n(8898),k=(0,a.aZ)({data(){return{clientData:void 0,tbodyHeight:0}},methods:{async getClientData(){try{const t=await Z.Z.get(`/clients/${this.$route.params.clientid}?single=true`);console.log("res",t.data.clientData),this.clientData=t.data.clientData}catch(t){console.error(t)}}},components:{Icon:v.Z,StatItem:h.Z,PopupButton:D.Z},async beforeMount(){await this.getClientData()},mounted(){const t=(0,y.b)(this.$refs);this.tbodyHeight=t}}),I=n(89);const z=(0,I.Z)(k,[["render",g],["__scopeId","data-v-69996939"]]);var H=z}}]);
//# sourceMappingURL=627.25cdf916.js.map