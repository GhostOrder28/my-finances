"use strict";(self["webpackChunkmy_finances"]=self["webpackChunkmy_finances"]||[]).push([[348],{8348:function(t,e,a){a.r(e),a.d(e,{default:function(){return $}});var n=a(3396),o=a(7139),i=a(9242);const r=t=>((0,n.dD)("data-v-68451e26"),t=t(),(0,n.Cn)(),t),s={id:"header"},c=r((()=>(0,n._)("h1",null,"Nuevo cliente",-1))),l={class:"input-container"},m=r((()=>(0,n._)("label",{for:"clientName",class:"f-rs"},"Nombre *",-1))),f={for:"clientName",class:"f-rs"},d={class:"input-container"},u=r((()=>(0,n._)("label",{for:"clientNameDetails",class:"f-rs"},"Detalle del nombre",-1))),h={for:"clientNameDetails",class:"f-rs"},p=r((()=>(0,n._)("span",{class:"tooltip"},"Esto es opcional, pero es útil para diferenciar entre dos personas con el mismo nombre.",-1))),N={class:"input-container"},_=r((()=>(0,n._)("label",{for:"contactPhone",class:"f-rs"},"Número de contacto",-1))),b={for:"contactPhone",class:"f-rs"},w=r((()=>(0,n._)("div",{id:"actions"},[(0,n._)("button",{type:"submit",class:"f-rs action-button confirm"},"Añadir cliente"),(0,n._)("button",{type:"button",class:"f-rs action-button danger"},"Cancelar")],-1)));function y(t,e,a,r,y,D){const g=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("section",{id:"page-content",style:(0,o.j5)({height:t.sectionHeight+"px"}),ref:"sectionRef"},[(0,n._)("div",s,[(0,n.Wm)(g,{name:"new-client"}),c]),(0,n._)("span",null,(0,o.zw)(t.formErrors.notFoundError),1),(0,n._)("form",{onSubmit:e[3]||(e[3]=(0,i.iM)(((...e)=>t.handleSubmit&&t.handleSubmit(...e)),["prevent"]))},[(0,n._)("div",l,[m,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.formState.clientName=e),name:"clientName",type:"text",placeholder:"Nombre del cliente"},null,512),[[i.nr,t.formState.clientName]]),(0,n._)("label",f,(0,o.zw)(t.formErrors.clientName),1)]),(0,n._)("div",d,[u,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.formState.clientNameDetails=e),name:"clientNameDetails",type:"text",placeholder:"amigo, vecino, etc"},null,512),[[i.nr,t.formState.clientNameDetails]]),(0,n._)("label",h,(0,o.zw)(t.formErrors.clientNameDetails),1),p]),(0,n._)("div",N,[_,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.formState.contactPhone=e),name:"contactPhone",type:"text",placeholder:"Número para contactar al cliente"},null,512),[[i.nr,t.formState.contactPhone]]),(0,n._)("label",b,(0,o.zw)(t.formErrors.contactPhone),1)]),w],32)],4)}var D=a(6089),g=a(8898),S=a(5072),v=(0,n.aZ)({data(){return{sectionHeight:0,formState:{clientName:"",clientNameDetails:"",contactPhone:""},formErrors:{}}},components:{Icon:D.Z},async beforeMount(){this.$route.params.clientid&&await this.getClientData()},mounted(){const{sectionRef:t}=this.$refs;this.sectionHeight=window.innerHeight-t.offsetTop},methods:{async handleSubmit(){try{const{clientName:t,clientNameDetails:e,contactPhone:a}=this.formState;let n;console.log(JSON.stringify(this.formState,null,2)),this.$route.params.clientid?(n=`/clients/${this.$route.params.clientid}`,await g.Z.patch(n,{clientName:t,clientNameDetails:e,contactPhone:a})):(n=`/clients/${this.$store.state._id}`,await g.Z.post(n,{clientName:t,clientNameDetails:e,contactPhone:a}))}catch(t){(0,S.IZ)(t)&&(this.formErrors=t.response?.data.validationError)}},async getClientData(){try{const t=await g.Z.get(`/clients/${this.$route.params.clientid}?single=true`),{sales:e,...a}=t.data.clientData;this.formState=a}catch(t){(0,S.IZ)(t)&&(this.formErrors=t.response?.data)}}}}),E=a(89);const P=(0,E.Z)(v,[["render",y],["__scopeId","data-v-68451e26"]]);var $=P}}]);
//# sourceMappingURL=348.b17948e6.js.map