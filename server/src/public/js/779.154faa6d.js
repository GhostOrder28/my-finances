"use strict";(self["webpackChunkmy_finances"]=self["webpackChunkmy_finances"]||[]).push([[779],{145:function(e,t,n){function s(e){const{tableRef:t}=e,n=t.children["0"],s=t.parentElement,r=Number(window.getComputedStyle(s).paddingBottom.slice(0,-2)),i=window.innerHeight-t.offsetTop-n.clientHeight-r;return i}n.d(t,{b:function(){return s}})},5121:function(e,t,n){n.d(t,{Z:function(){return d}});var s=n(3396),r=n(7139);function i(e,t,n,i,l,a){const o=(0,s.up)("Icon"),c=(0,s.up)("router-link");return(0,s.wg)(),(0,s.j4)(c,{class:"position-fixed bottom-0 end-0 m-3 py-2 px-3 rounded-pill d-flex gap-2 align-items-center fs-6 fw-bold bg-blue text-purple text-decoration-none",to:e.url},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.label)+" ",1),(0,s.Wm)(o,{name:"plus"})])),_:1},8,["to"])}var l=n(3784),a=(0,s.aZ)({props:{label:{type:String,required:!0},url:{type:Object,required:!0}},components:{Icon:l.Z}}),o=n(89);const c=(0,o.Z)(a,[["render",i]]);var d=c},7052:function(e,t,n){n.d(t,{Z:function(){return u}});var s=n(3396),r=n(7139);const i={class:"position-fixed top-0 d-flex flex-column justify-content-center align-items-center gap-3 w-100 vh-100 fs-5 fw-bold bg-white opacity-75"},l=(0,s._)("div",{class:"spinner-border text-green"},null,-1);function a(e,t,n,a,o,c){return(0,s.wg)(),(0,s.iD)("div",i,[l,(0,s._)("p",null,(0,r.zw)(n.msg),1)])}var o={props:{msg:{type:String,required:!1}}},c=n(89);const d=(0,c.Z)(o,[["render",a]]);var u=d},1578:function(e,t,n){n.d(t,{Z:function(){return f}});var s=n(3396),r=n(7139);const i={class:"d-flex flex-column align-items-start flex-grow-1"},l={class:"d-flex gap-1"},a={class:"fs-6"},o={class:"fs-2 fw-bolder"};function c(e,t,n,c,d,u){const p=(0,s.up)("Icon");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",l,[(0,s.Wm)(p,{name:n.icon},null,8,["name"]),(0,s._)("h2",a,(0,r.zw)(n.label),1)]),(0,s._)("span",o,"S/ "+(0,r.zw)(n.value),1)])}var d=n(3784),u={props:{icon:{required:!0,type:String},label:{required:!0,type:String},value:{required:!0,type:String}},components:{Icon:d.Z}},p=n(89);const b=(0,p.Z)(u,[["render",c]]);var f=b},9779:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var s=n(3396),r=n(7139);const i={class:"container bg-green px-4 py-3"},l={class:"d-flex"},a={class:"container p-4"},o={class:"table w-100 m-0",ref:"tableRef"},c=(0,s._)("thead",null,[(0,s._)("tr",{height:"50",class:"border-bottom border-2 border-dark-teal align-middle w-100 d-table"},[(0,s._)("th",{class:"fs-6 p-0 text-dark-teal text-start"},"Nombre"),(0,s._)("th",{class:"fs-6 p-0 text-dark-teal text-end"},"Deuda individual")])],-1),d={height:"50",class:"align-middle border-bottom w-100 d-table"},u={class:"fs-6 text-start"},p={class:"fs-6 text-end"};function b(e,t,n,b,f,g){const m=(0,s.up)("StatItem"),w=(0,s.up)("router-link"),h=(0,s.up)("PopupButton"),v=(0,s.up)("Spinner");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("section",i,[(0,s._)("div",l,[(0,s.Wm)(m,{icon:"total-debt",label:"Deuda total",value:e.receivables},null,8,["value"]),(0,s.Wm)(m,{icon:"debtor",label:"Deudores",value:e.debtors},null,8,["value"])])]),(0,s._)("section",a,[(0,s._)("table",o,[c,(0,s._)("tbody",{style:(0,r.j5)({height:e.tbodyHeight+"px"}),class:"d-block overflow-scroll pb-5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.clientList,((e,t)=>((0,s.wg)(),(0,s.j4)(w,{key:"client"+t,to:{name:"client",params:{clientid:e._id.toString()}},class:"text-dark-teal text-decoration-none"},{default:(0,s.w5)((()=>[(0,s._)("tr",d,[(0,s._)("td",u,(0,r.zw)(e.clientName),1),(0,s._)("td",p,"S/ "+(0,r.zw)(e.currentDebt),1)])])),_:2},1032,["to"])))),128))],4)],512)]),(0,s.Wm)(h,{label:"AÃ±adir cliente",url:{name:"newclient"}}),e.isLoading?((0,s.wg)(),(0,s.j4)(v,{key:0})):(0,s.kq)("",!0)],64)}var f=n(5121),g=n(1578),m=n(145),w=n(8898),h=n(7052),v=(0,s.aZ)({data(){return{receivables:0,debtors:0,clientList:[],tbodyHeight:0,isLoading:!1}},methods:{async getClients(){try{this.isLoading=!0;const e=await w.Z.get(`/clients/${this.$store.state._id}`),t=await w.Z.get(`/users/${this.$store.state._id}`);this.clientList=e.data.clientList,this.receivables=t.data.userAssets.receivables,this.debtors=t.data.userAssets.debtors,this.isLoading=!1}catch(e){console.error(e)}}},components:{StatItem:g.Z,PopupButton:f.Z,Spinner:h.Z},async beforeMount(){await this.getClients()},mounted(){const e=(0,m.b)(this.$refs);this.tbodyHeight=e}}),x=n(89);const _=(0,x.Z)(v,[["render",b]]);var y=_}}]);
//# sourceMappingURL=779.154faa6d.js.map