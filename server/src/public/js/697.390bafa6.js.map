{"version":3,"file":"js/697.390bafa6.js","mappings":"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","sources":["webpack://my-finances/./src/pages/sale-form-page.vue?62f6","webpack://my-finances/../server/src/types/sale.types.ts","webpack://my-finances/./src/pages/sale-form-page.vue?799c","webpack://my-finances/./src/pages/sale-form-page.vue"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle } from \"vue\"\n\nconst _hoisted_1 = { class: \"container p-4\" }\nconst _hoisted_2 = { class: \"d-flex flex-column align-items-baseline gap-2 align-items-center\" }\nconst _hoisted_3 = { class: \"d-flex gap-2 align-items-center\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"fs-6\"\n}\nconst _hoisted_5 = {\n  key: 1,\n  class: \"fs-6\"\n}\nconst _hoisted_6 = { class: \"fs-2 fw-bold\" }\nconst _hoisted_7 = { class: \"fs-6 fst-italic\" }\nconst _hoisted_8 = { class: \"d-flex flex-column align-items-start gap-3\" }\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"h2\", { class: \"fs-6 m-0\" }, [\n  /*#__PURE__*/_createElementVNode(\"label\", { for: \"date\" }, \"Fecha de venta\")\n], -1)\nconst _hoisted_10 = {\n  key: 0,\n  class: \"d-flex flex-column align-items-start gap-3\"\n}\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"h2\", { class: \"fs-6 m-0\" }, [\n  /*#__PURE__*/_createElementVNode(\"label\", { for: \"initialPayment\" }, \"Pago inicial\")\n], -1)\nconst _hoisted_12 = {\n  class: \"error-message\",\n  for: \"initialPayment\"\n}\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"h2\", { class: \"fs-6 m-0 text-start\" }, \"Productos\", -1)\nconst _hoisted_14 = { class: \"input-group gap-0\" }\nconst _hoisted_15 = [\"onUpdate:modelValue\", \"onInput\"]\nconst _hoisted_16 = [\"onUpdate:modelValue\"]\nconst _hoisted_17 = [\"onUpdate:modelValue\"]\nconst _hoisted_18 = [\"onClick\"]\nconst _hoisted_19 = { class: \"d-flex flex-column align-items-start mt-1\" }\nconst _hoisted_20 = {\n  key: 0,\n  class: \"error-message\",\n  for: \"name\"\n}\nconst _hoisted_21 = {\n  key: 1,\n  class: \"error-message\",\n  for: \"quantity\"\n}\nconst _hoisted_22 = {\n  key: 2,\n  class: \"error-message\",\n  for: \"pricePerUnit\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Icon = _resolveComponent(\"Icon\")!\n  const _component_date_picker = _resolveComponent(\"date-picker\")!\n  const _component_FormButtons = _resolveComponent(\"FormButtons\")!\n\n  return (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [\n    _createElementVNode(\"h1\", _hoisted_2, [\n      _createElementVNode(\"span\", _hoisted_3, [\n        _createVNode(_component_Icon, { name: \"new-sale\" }),\n        (_ctx.$route.name === 'newsale')\n          ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, \"Nueva venta realizada a\"))\n          : _createCommentVNode(\"\", true),\n        (_ctx.$route.name === 'editsale')\n          ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \"Editar venta realizada a\"))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_ctx.$route.query.clientName), 1),\n      _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_ctx.$route.query.clientNameDetails), 1)\n    ]),\n    _createElementVNode(\"form\", {\n      onSubmit: _cache[5] || (_cache[5] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.handleSubmit && _ctx.handleSubmit(...args)), [\"prevent\"])),\n      id: \"myform\",\n      class: \"d-flex flex-column gap-4 mt-4\"\n    }, [\n      _createElementVNode(\"div\", _hoisted_8, [\n        _hoisted_9,\n        _createVNode(_component_date_picker, {\n          class: \"date-picker\",\n          name: \"date\",\n          value: _ctx.formState.saleDate,\n          \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.formState.saleDate) = $event)),\n          formatter: _ctx.dateFormat,\n          calendarClass: ['custom-calendar']\n        }, null, 8, [\"value\", \"formatter\"])\n      ]),\n      (_ctx.$route.name === 'newsale')\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n            _hoisted_11,\n            _withDirectives(_createElementVNode(\"input\", {\n              class: \"form-control\",\n              type: \"number\",\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.initialPayment) = $event)),\n              name: \"initialPayment\",\n              onFocus: _cache[2] || (_cache[2] = ($event: any) => (($event.target as HTMLInputElement).select()))\n            }, null, 544), [\n              [_vModelText, _ctx.initialPayment]\n            ]),\n            _createElementVNode(\"label\", _hoisted_12, _toDisplayString(_ctx.formErrors ? _ctx.formErrors.payments : ''), 1)\n          ]))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", {\n        class: \"d-flex flex-column gap-3 overflow-scroll\",\n        ref: \"itemsRef\",\n        style: _normalizeStyle({ height: _ctx.itemsContainerHeight + 'px' })\n      }, [\n        _hoisted_13,\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.formState.items, (item, idx) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: 'item' + idx\n          }, [\n            _createElementVNode(\"div\", _hoisted_14, [\n              _withDirectives(_createElementVNode(\"input\", {\n                class: \"form-control name-field\",\n                \"onUpdate:modelValue\": ($event: any) => ((_ctx.formState.items[idx].name) = $event),\n                onInput: ($event: any) => (_ctx.handlePress($event, idx)),\n                name: \"name\",\n                type: \"text\",\n                placeholder: \"Nombre\"\n              }, null, 40, _hoisted_15), [\n                [_vModelText, _ctx.formState.items[idx].name]\n              ]),\n              _withDirectives(_createElementVNode(\"input\", {\n                class: \"form-control quantity-field\",\n                \"onUpdate:modelValue\": ($event: any) => ((_ctx.formState.items[idx].quantity) = $event),\n                name: \"quantity\",\n                type: \"number\",\n                onFocus: _cache[3] || (_cache[3] = ($event: any) => (($event.target as HTMLInputElement).select())),\n                onContextmenu: _cache[4] || (_cache[4] = _withModifiers(() => {}, [\"prevent\"]))\n              }, null, 40, _hoisted_16), [\n                [_vModelText, _ctx.formState.items[idx].quantity]\n              ]),\n              _withDirectives(_createElementVNode(\"input\", {\n                class: \"form-control price-field\",\n                \"onUpdate:modelValue\": ($event: any) => ((_ctx.formState.items[idx].pricePerUnit) = $event),\n                name: \"pricePerUnit\",\n                type: \"number\",\n                placeholder: \"Precio\"\n              }, null, 8, _hoisted_17), [\n                [_vModelText, _ctx.formState.items[idx].pricePerUnit]\n              ]),\n              _createElementVNode(\"button\", {\n                class: \"btn btn-outline-danger delete-button\",\n                onClick: ($event: any) => (_ctx.handleRemove(idx)),\n                type: \"button\"\n              }, [\n                _createVNode(_component_Icon, { name: \"cross\" })\n              ], 8, _hoisted_18)\n            ]),\n            _createElementVNode(\"div\", _hoisted_19, [\n              (_ctx.formErrors && _ctx.formErrors[`name${idx}`])\n                ? (_openBlock(), _createElementBlock(\"label\", _hoisted_20, _toDisplayString(_ctx.formErrors[`name${idx}`]), 1))\n                : _createCommentVNode(\"\", true),\n              (_ctx.formErrors && _ctx.formErrors[`quantity${idx}`])\n                ? (_openBlock(), _createElementBlock(\"label\", _hoisted_21, _toDisplayString(_ctx.formErrors[`quantity${idx}`]), 1))\n                : _createCommentVNode(\"\", true),\n              (_ctx.formErrors && _ctx.formErrors[`pricePerUnit${idx}`])\n                ? (_openBlock(), _createElementBlock(\"label\", _hoisted_22, _toDisplayString(_ctx.formErrors[`pricePerUnit${idx}`]), 1))\n                : _createCommentVNode(\"\", true)\n            ])\n          ]))\n        }), 128))\n      ], 4)\n    ], 32),\n    _createVNode(_component_FormButtons, {\n      ref: \"actionsRef\",\n      confirmLabel: _ctx.$route.name === 'newsale' ? 'Confirmar venta' : 'Confirmar',\n      onFormSubmit: _ctx.handleSubmit,\n      cancelLabel: \"Cancelar\"\n    }, null, 8, [\"confirmLabel\", \"onFormSubmit\"])\n  ]))\n}","import { Types } from \"mongoose\";\nimport { Client, ClientResBody } from \"./client.types\";\nimport { Payment, PaymentPostReqBody, PaymentResBody } from \"./payment.types\";\n\ntype Item = {\n  name: string;\n  quantity: number;\n  pricePerUnit: number;\n}\n\ntype ItemResBody = Omit<Item, '_id'> & { _id: string };\n\ntype Sale = {\n  _id: Types.ObjectId;\n  saleDate: string;\n  items: Item[];\n  payments: Payment[];\n  saleValue: number;\n  paidAmount: number;\n  unpaidAmount: number;\n};\n\ntype SalePostReqBody = Pick<Sale, 'items'> & {\n  payments: PaymentPostReqBody[];\n  saleDate: Date;\n}\n\ntype SalePatchReqBody = Pick<Sale, 'items'> & {\n  saleDate: Date;\n};\n\ntype SaleResBody = Omit<Sale, '_id' | 'items' | 'payments'> & { \n  _id: string;\n  items: ItemResBody[],\n  payments: PaymentResBody[],\n}\n\ntype SaleFormData = SalePatchReqBody & Pick<Client, 'clientName' | 'clientNameDetails'>; // this should be called SaleFormPageData or smth like that\ntype ClientAndSaleResBody = Omit<ClientResBody, 'sales'> & { sale: SaleResBody }; // this should be plainly called ClientAndSaleData\ntype SaleDataForPaymentForm = Pick<Client, 'clientName' | 'clientNameDetails'> & Pick<Sale, 'unpaidAmount' | 'saleDate'>;\ntype SaleAfterPayment = Pick<Sale, 'paidAmount' | 'unpaidAmount'>;\n\nfunction isSalePostReqBody (saleReqBody: SalePostReqBody | SalePatchReqBody | SalePatchReqBody): saleReqBody is SalePostReqBody {\n  return (saleReqBody as SalePostReqBody).payments !== undefined;   \n};\n\nfunction isSaleFormResBody (saleResBody: SaleFormData | ClientAndSaleResBody): saleResBody is SaleFormData {\n  return (saleResBody as SaleFormData).items !== undefined;\n};\n\nfunction isClientAndSaleResBody (saleResBody: SaleFormData | ClientAndSaleResBody): saleResBody is ClientAndSaleResBody {\n  return (saleResBody as ClientAndSaleResBody).contactPhone !== undefined;\n};\n\nexport {\n  Item,\n  ItemResBody,\n  Payment,\n  Sale,\n  SaleResBody,\n  ClientAndSaleResBody,\n  SalePostReqBody,\n  SalePatchReqBody,\n  SaleFormData,\n  SaleAfterPayment,\n  isSalePostReqBody,\n  isSaleFormResBody,\n  isClientAndSaleResBody,\n  SaleDataForPaymentForm,\n}\n","\nimport Icon from '@/components/icon.vue'\nimport { format } from 'date-fns'\nimport DatePicker from 'vue-datepicker-next'\nimport 'vue-datepicker-next/index.css';\nimport { defineComponent } from 'vue'\nimport { State, Methods, Refs } from '@/types/pages/sale-form-page.types'\nimport { Empty } from '@/types/global.types'\nimport { SaleFormData, isSalePostReqBody } from '#backend/sale.types'\nimport FormButtons from '@/components/form-buttons.vue'\nimport http from '@/utils/axios-instance'\nimport { isAxiosError } from 'axios'\n\nconst itemInitialState = { \n  name: '', \n  quantity: 1, \n  pricePerUnit: NaN \n};\nexport default defineComponent<Empty, Empty, State, Empty, Methods>({\n  data () {\n    return {\n      itemsContainerHeight: 0,\n      initialPayment: 0,\n      formState: {\n        saleDate: new Date(),\n        items: [ { ...itemInitialState }, { ...itemInitialState } ],\n        ...this.$route.name === 'newsale' ? { payments: [] } : {}\n      },\n      formErrors: undefined,\n      dateFormat: {\n        stringify: (date) => {\n          return date ? format(date, 'dd/MM/yyyy') : ''\n        }\n      }\n    }\n  },\n  components: {\n    Icon,\n    DatePicker,\n    FormButtons\n  },\n  methods: {\n    async handleSubmit () {\n      console.log(JSON.stringify(this.formState, null, 2));\n      console.log('route name', this.$route.name);\n      try {\n        if (this.$route.name === 'newsale') {\n          if (!isSalePostReqBody(this.formState)) return;\n\n          const res = await http.patch(`/clients/${this.$route.params.clientid}/sales`, {\n            ...this.formState,\n            items: this.getExistentItems()\n          })\n\n          this.$router.push({ \n            name: 'sale', \n            params: { clientid: this.$route.params.clientid, saleid: res.data.saleId } \n          })\n        } \n\n        if(this.$route.name === 'editsale') {\n          await http.patch(`/clients/${this.$route.params.clientid}/sales/${this.$route.params.saleid}`, {\n            ...this.formState,\n            items: this.getExistentItems()\n          })\n\n          this.$router.push({ name: 'sale', params: this.$route.params })\n        }\n      } catch (err) {\n        if (isAxiosError(err)) {\n          this.formErrors = err.response?.data.validationError\n        }\n      }\n    },\n    async handleRemove (idxToRemove) {\n      const remainingItems = this.formState.items.filter((_, idx) => idxToRemove !== idx);\n      this.formState.items = remainingItems;\n    },\n    handlePress (e, idx) {\n      if ((e.target as HTMLInputElement).value.length !== 0 && idx === this.formState.items.length - 1) {\n        this.formState.items = [ ...this.formState.items, { ...itemInitialState } ]\n      }\n    },\n    getExistentItems () {\n      return this.formState.items.filter((_, idx) => idx !== this.formState.items.length - 1);\n    },\n    async getSaleData () {\n      try {\n        const { clientid, saleid } = this.$route.params;\n        if (this.$route.name === 'editsale') {\n          const res = await http.get<{ saleData: SaleFormData }>(`/clients/${clientid}/sales/${saleid}?filter=saleform`)\n          console.log('res', res.data.saleData);\n          const { saleDate, items, clientName, clientNameDetails } = res.data.saleData;\n          this.formState = { saleDate: new Date(saleDate), items: [ ...items, itemInitialState ] }\n          this.clientName = clientName\n          this.clientNameDetails = clientNameDetails\n        }\n      } catch (err) {\n        if (isAxiosError(err)) {\n          this.formErrors = err.response?.data\n        } else {\n          console.error(err)\n        }\n      }\n    }\n  },\n  watch: {\n    initialPayment (newValue) {\n      if (!isSalePostReqBody(this.formState)) return;\n      if (newValue > 0) {\n        this.formState.payments = [{\n          paymentDate: new Date(this.formState.saleDate), // the initial payment is always the same day as the sale date\n          amount: newValue,\n        }]\n      }\n    },\n    'formState.saleDate': function (newValue: Date) {\n      if (!isSalePostReqBody(this.formState)) return;\n      if (this.formState.payments.length) {\n        this.formState.payments[0].paymentDate = new Date(newValue)\n      }\n    },\n    formState (newValue) {\n      console.log('formState new value: ', JSON.stringify(newValue, null, 2))\n      return newValue.payments;\n    },\n    formErrors (newValue) {\n      console.log('formErrors', newValue);\n    }\n  },\n  async beforeMount () {\n    await this.getSaleData()\n  },\n  mounted () {\n    const { itemsRef, actionsRef } = this.$refs as Refs;\n    this.itemsContainerHeight = window.innerHeight - itemsRef.offsetTop - actionsRef.$el.clientHeight - 30;\n  },\n})\n","import { render } from \"./sale-form-page.vue?vue&type=template&id=058495be&ts=true\"\nimport script from \"./sale-form-page.vue?vue&type=script&lang=ts\"\nexport * from \"./sale-form-page.vue?vue&type=script&lang=ts\"\n\nimport \"./sale-form-page.vue?vue&type=style&index=0&id=058495be&lang=css\"\n\nimport exportComponent from \"/home/ghost-order/proyectos_personales/dev/my-finances/client/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","key","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_createElementVNode","for","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","render","_ctx","_cache","$props","$setup","$data","$options","_component_Icon","_resolveComponent","_component_date_picker","_component_FormButtons","_openBlock","_createElementBlock","_createVNode","name","$route","_createCommentVNode","_toDisplayString","query","clientName","clientNameDetails","onSubmit","_withModifiers","args","handleSubmit","id","value","formState","saleDate","$event","formatter","dateFormat","calendarClass","_withDirectives","type","initialPayment","onFocus","target","select","_vModelText","formErrors","payments","ref","style","_normalizeStyle","height","itemsContainerHeight","_Fragment","_renderList","items","item","idx","onInput","handlePress","placeholder","quantity","onContextmenu","pricePerUnit","onClick","handleRemove","confirmLabel","onFormSubmit","cancelLabel","isSalePostReqBody","saleReqBody","undefined","itemInitialState","NaN","defineComponent","data","Date","this","stringify","date","format","components","Icon","DatePicker","FormButtons","methods","async","console","log","JSON","res","http","params","clientid","getExistentItems","$router","push","saleid","saleId","err","isAxiosError","response","validationError","idxToRemove","remainingItems","filter","_","e","length","saleData","error","watch","newValue","paymentDate","amount","getSaleData","mounted","itemsRef","actionsRef","$refs","window","innerHeight","offsetTop","$el","clientHeight","__exports__"],"sourceRoot":""}