{"version":3,"file":"js/489.6a8aab39.js","mappings":"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","sources":["webpack://my-finances/./src/components/form-buttons.vue","webpack://my-finances/./src/components/form-buttons.vue?2261","webpack://my-finances/./src/pages/client-form-page.vue?e902","webpack://my-finances/./src/pages/client-form-page.vue?e876","webpack://my-finances/./src/pages/client-form-page.vue"],"sourcesContent":["<template>\n  <div class=\"container px-4 w-100 d-flex gap-4\">\n    <button \n      class=\"flex-grow-1 py-2 border-0 fs-6 fw-bold rounded-pill bg-blue text-light-purple\" \n      type=\"button\"\n      @click=\"$emit('formSubmit')\"\n    >\n      {{ confirmLabel }}\n    </button>\n    <button \n      class=\"flex-grow-1 py-2 border-0 fs-6 fw-bold rounded-pill bg-red text-light-red\" \n      v-if=\"!single\"\n      type=\"button\"\n      @click.prevent=\"$router.back()\"\n    >\n      {{ cancelLabel }}\n    </button>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    confirmLabel: {\n      type: String,\n      required: true,\n    },\n    cancelLabel: {\n      type: String,\n      required: true,\n    },\n    single: {\n      type: Boolean,\n      default: false,\n      required: false,\n    }\n  },\n}\n</script>\n","import { render } from \"./form-buttons.vue?vue&type=template&id=4a80aa82\"\nimport script from \"./form-buttons.vue?vue&type=script&lang=js\"\nexport * from \"./form-buttons.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/ghost-order/proyectos_personales/dev/my-finances/client/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle } from \"vue\"\n\nconst _hoisted_1 = { class: \"d-flex gap-3 align-items-center\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"fs-3 fw-bold m-0\"\n}\nconst _hoisted_3 = {\n  key: 1,\n  class: \"fs-3 fw-bold m-0\"\n}\nconst _hoisted_4 = { class: \"d-flex flex-column gap-3 align-items-start\" }\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"fs-6\",\n  for: \"clientName\"\n}, \"Nombre *\", -1)\nconst _hoisted_6 = {\n  key: 0,\n  class: \"error-message\",\n  for: \"clientName\"\n}\nconst _hoisted_7 = { class: \"d-flex flex-column gap-3 align-items-start\" }\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"fs-6\",\n  for: \"clientNameDetails\"\n}, \"Detalle del nombre\", -1)\nconst _hoisted_9 = { class: \"d-flex flex-column gap-2\" }\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"detail-description text-start opacity-75\" }, \"Esto es opcional, pero es útil para diferenciar entre dos personas con el mismo nombre.\", -1)\nconst _hoisted_11 = {\n  key: 0,\n  class: \"error-message\",\n  for: \"clientNameDetails\"\n}\nconst _hoisted_12 = { class: \"d-flex flex-column gap-3 align-items-start\" }\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"fs-6\",\n  for: \"contactPhone\"\n}, \"Número de contacto\", -1)\nconst _hoisted_14 = {\n  key: 0,\n  class: \"error-message\",\n  for: \"contactPhone\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Icon = _resolveComponent(\"Icon\")!\n  const _component_FormButtons = _resolveComponent(\"FormButtons\")!\n\n  return (_openBlock(), _createElementBlock(\"section\", {\n    style: _normalizeStyle({ height: _ctx.sectionHeight + 'px' }),\n    class: \"container p-4\"\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_Icon, { name: \"new-client\" }),\n      (_ctx.$route.name === 'newclient')\n        ? (_openBlock(), _createElementBlock(\"h1\", _hoisted_2, \"Nuevo cliente\"))\n        : _createCommentVNode(\"\", true),\n      (_ctx.$route.name === 'editclient')\n        ? (_openBlock(), _createElementBlock(\"h1\", _hoisted_3, \"Editar cliente\"))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _createElementVNode(\"span\", null, _toDisplayString(_ctx.formErrors.notFoundError), 1),\n    _createElementVNode(\"form\", {\n      class: \"d-flex flex-column gap-4 mt-4\",\n      ref: \"formRef\",\n      style: _normalizeStyle({ height: _ctx.formHeight + 'px' }),\n      onSubmit: _cache[3] || (_cache[3] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.handleSubmit && _ctx.handleSubmit(...args)), [\"prevent\"]))\n    }, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        _hoisted_5,\n        _withDirectives(_createElementVNode(\"input\", {\n          class: \"form-control\",\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.formState.clientName) = $event)),\n          name: \"clientName\",\n          type: \"text\",\n          placeholder: \"Nombre del cliente\"\n        }, null, 512), [\n          [_vModelText, _ctx.formState.clientName]\n        ]),\n        (_ctx.formErrors.clientName)\n          ? (_openBlock(), _createElementBlock(\"label\", _hoisted_6, _toDisplayString(_ctx.formErrors.clientName), 1))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _hoisted_8,\n        _createElementVNode(\"div\", _hoisted_9, [\n          _withDirectives(_createElementVNode(\"input\", {\n            class: \"form-control\",\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.formState.clientNameDetails) = $event)),\n            name: \"clientNameDetails\",\n            type: \"text\",\n            placeholder: \"amigo, vecino, etc\"\n          }, null, 512), [\n            [_vModelText, _ctx.formState.clientNameDetails]\n          ]),\n          _hoisted_10\n        ]),\n        (_ctx.formErrors.clientNameDetails)\n          ? (_openBlock(), _createElementBlock(\"label\", _hoisted_11, _toDisplayString(_ctx.formErrors.clientNameDetails), 1))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_12, [\n        _hoisted_13,\n        _withDirectives(_createElementVNode(\"input\", {\n          class: \"form-control\",\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.formState.contactPhone) = $event)),\n          name: \"contactPhone\",\n          type: \"text\",\n          placeholder: \"Número para contactar al cliente\"\n        }, null, 512), [\n          [_vModelText, _ctx.formState.contactPhone]\n        ]),\n        (_ctx.formErrors.contactPhone)\n          ? (_openBlock(), _createElementBlock(\"label\", _hoisted_14, _toDisplayString(_ctx.formErrors.contactPhone), 1))\n          : _createCommentVNode(\"\", true)\n      ])\n    ], 36),\n    _createVNode(_component_FormButtons, {\n      ref: \"actionsRef\",\n      confirmLabel: _ctx.$route.name === 'newclient' ? 'Añadir cliente' : 'Confirmar',\n      onFormSubmit: _ctx.handleSubmit,\n      cancelLabel: \"Cancelar\"\n    }, null, 8, [\"confirmLabel\", \"onFormSubmit\"])\n  ], 4))\n}","\nimport { State, Methods, Refs } from '@/types/pages/client-form-page.types'\nimport Icon from '@/components/icon.vue'\nimport http from '@/utils/axios-instance'\nimport { Empty } from '@/types/global.types'\nimport { defineComponent } from 'vue'\nimport { isAxiosError } from 'axios'\nimport FormButtons from '@/components/form-buttons.vue'\n\nexport default defineComponent<Empty, Empty, State, Empty, Methods>({\n  data () {\n    return {\n      formHeight: 0,\n      formState: {\n        clientName: '',\n        clientNameDetails: '',\n        contactPhone: '',\n      },\n      formErrors: {}\n    }\n  },\n  components: {\n    Icon,\n    FormButtons,\n  },\n  methods: {\n    async handleSubmit () {\n      try {\n        const { clientid } = this.$route.params;\n        console.log(JSON.stringify(this.formState, null, 2))\n\n        let res;\n\n        if (this.$route.name === 'editclient') {\n          res = await http.patch(`/clients/${clientid}`, this.formState)\n        } else {\n          res = await http.post(`/clients/${this.$store.state._id}`, this.formState)\n        }\n\n        console.log('res', res.data);\n        this.$router.push({ name: 'client', params: { clientid: res.data.clientId } })\n      } catch (err) {\n        if (isAxiosError(err)) {\n          this.formErrors = err.response?.data.validationError\n        }\n      }\n    },\n    getClientData () {\n      const { clientName, clientNameDetails, contactPhone } = this.$route.query;\n      this.formState = { \n        clientName: String(clientName), \n        clientNameDetails: String(clientNameDetails), \n        contactPhone: String(contactPhone)\n      }\n      // try {\n      //   const res = await http.get(`/clients/${this.$route.params.clientid}?single=true`)\n      //   const { sales, ...clientData } = res.data.clientData\n      //   this.formState = clientData\n      // } catch (err) {\n      //   if (isAxiosError(err)) {\n      //     this.formErrors = err.response?.data\n      //   }\n      // }\n    }\n  },\n  async beforeMount () {\n    if (this.$route.name === 'editclient') {\n      this.getClientData()\n    }\n  },\n  mounted () {\n    const { formRef, actionsRef } = this.$refs as Refs;\n    this.formHeight = window.innerHeight - formRef.offsetTop - actionsRef.$el.clientHeight - 30; \n    // this last part is just for testing purposes in my desktop environment, for some reason on firefox when tbody display is set to block then offsettop alwaqys returns 0\n  },\n})\n","import { render } from \"./client-form-page.vue?vue&type=template&id=f6e9cac8&ts=true\"\nimport script from \"./client-form-page.vue?vue&type=script&lang=ts\"\nexport * from \"./client-form-page.vue?vue&type=script&lang=ts\"\n\nimport \"./client-form-page.vue?vue&type=style&index=0&id=f6e9cac8&lang=css\"\n\nimport exportComponent from \"/home/ghost-order/proyectos_personales/dev/my-finances/client/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","type","onClick","_ctx","$props","back","props","confirmLabel","String","required","cancelLabel","single","Boolean","default","__exports__","render","_hoisted_2","key","_hoisted_3","_hoisted_4","_hoisted_5","for","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_cache","$setup","$data","$options","_component_Icon","_resolveComponent","_component_FormButtons","_openBlock","style","_normalizeStyle","height","sectionHeight","_createVNode","name","$route","_createCommentVNode","_toDisplayString","formErrors","notFoundError","ref","formHeight","onSubmit","_withModifiers","args","handleSubmit","_withDirectives","$event","formState","clientName","placeholder","_vModelText","clientNameDetails","contactPhone","onFormSubmit","defineComponent","data","components","Icon","FormButtons","methods","async","clientid","this","params","res","console","log","JSON","stringify","http","$store","state","_id","$router","push","clientId","err","isAxiosError","response","validationError","getClientData","query","mounted","formRef","actionsRef","$refs","window","innerHeight","offsetTop","$el","clientHeight"],"sourceRoot":""}